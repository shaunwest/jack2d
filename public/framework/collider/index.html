<!DOCTYPE html>
<html>
<head>
  <title>Collider Demo</title>
  <style>
    #colliderContainer {
      position: absolute;
      border: 1px solid black;
      left: 0;
      width: 400px;
      height: 400px;
    }
    #myObj1, #myObj2, #myObj3 {
      position: absolute;
      pointer-events: none;
    }
    #myObj1 { background: red; z-index: 1;}
    #myObj2, #myObj3 { background: blue;}
  </style>
  <script src="../../js/jack2d.js"></script>
  <script>
    var CELL_SIZE = 100,
      NUM_CELLS = 4,
      WORLD_SIZE = CELL_SIZE * NUM_CELLS,
      MOVE_SPEED = 4;

    jack2d(['obj', 'liveElementFactory', 'input'], function(obj, $el, input) {
      var myObj1 = $el('#myObj1', obj.mixin(['AABBObject'], {
          moveDeltaX: 0,
          moveDeltaY: 0,
          x: 0,
          y: 0,
          width: 16,
          height: 16
        })),
        myObj2 = $el('#myObj2', obj.mixin(['AABBObject'], {moveDeltaX: 0, moveDeltaY: 0, x: 200, y: 200, width: 16, height: 16})),
        myObj3 = $el('#myObj3', obj.mixin(['AABBObject'], {moveDeltaX: 0, moveDeltaY: 0, x: 216, y: 200, width: 16, height: 16}));

      obj.mixin(['collider', 'canvas']).
        el('#visualCollider').
        checkerBackground().
        setWorldBounds(WORLD_SIZE).
        addObjects(myObj1, myObj2, myObj3).
        onInteract(function(event) {
          myObj1.x = event.offsetX - myObj1.width / 2;
          myObj1.y = event.offsetY - myObj1.height / 2;
        });

      myObj1.
        onBoundaryCollision(function() {
          //console.log('Bounds Collision!');
        });

      input.onInputUpdate(function(inputs) {
        if(inputs[input.LEFT]) {
          myObj1.moveX(-MOVE_SPEED);
        } else if(inputs[input.RIGHT]) {
          myObj1.moveX(MOVE_SPEED);
        }

        if(inputs[input.UP]) {
          myObj1.moveY(-MOVE_SPEED);
        } else if(inputs[input.DOWN]) {
          myObj1.moveY(MOVE_SPEED);
        }
      });
    });
  </script>
</head>
<body>
  <div id="colliderContainer">
    <canvas id="visualCollider" width="400" height="400"></canvas>
    <div id="myObj1"></div>
    <div id="myObj2"></div>
    <div id="myObj3"></div>
  </div>
</body>
</html>