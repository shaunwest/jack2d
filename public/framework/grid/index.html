<!DOCTYPE html>
<html>
<head>
  <title>Grid Demo</title>
  <style>
    #gridContainer {
      position: absolute;
      border: 1px solid black;
      top: 0;
      right: 0;
      width: 400px;
      height: 400px;
    }
    #myObj1, #myObj2 {
      position: absolute;
      width: 16px;
      height: 16px;
      background: red;
    }
    #output {
      font-family: courier, sans-serif;
      position: absolute;
      background-color: rgba(0,0,0,0.7);
      color: #ffffff;
      margin: 0;
      padding: 10px;
      z-index: 99999;
      border: 2px solid #222222;
    }
  </style>
  <script src="../../js/jack2d.js"></script>
  <script>
    var CELL_SIZE = 100,
      myObj1 = {x: 0, y: 0, width: 16, height: 16},
      myObj2 = {x: 225, y: 125, width: 16, height: 16};

    jack2d(['debug', 'obj', 'grid', 'canvas', 'elementFactory'],
    function(debug, obj, grid, canvas, elFactory) {
      var visualGrid = obj.mixin(grid, canvas),
        obj1 = elFactory('#myObj1'),
        obj2 = elFactory('#myObj2');

      visualGrid.
        el('#gridViewer').
        setDimensions(CELL_SIZE, 4, 4).
        addObject(myObj1).
        addObject(myObj2).
        checkerBackground(CELL_SIZE).
        onInteract(function(event) {
          console.log((event.offsetX) + ', ' + (event.offsetY));
        }).
        onFrame(function() {
          obj1.setStyle('left', myObj1.x + 'px').setStyle('top', myObj1.y + 'px');
          obj2.setStyle('left', myObj2.x + 'px').setStyle('top', myObj2.y + 'px');
        });

      //console.log(grid.getObjects(myObj1.cells));

      debug.el('#output').livePrint(function(print) {
        print('myObj1', '<p>myObj1:<br>' + obj.print(myObj1.cells) + '</p>');
        print('myObj2', '<p>myObj2:<br>' + obj.print(myObj2.cells) + '</p>');
      });
    });
  </script>
</head>
<body>
<div id="output"></div>
<div id="gridContainer">
  <canvas id="gridViewer" width="400" height="400"></canvas>
  <div id="myObj1"></div>
  <div id="myObj2"></div>
</div>
</body>
</html>